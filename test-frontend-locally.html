<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunday Edge Pro - API Connection Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #000; color: #fff; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #2d5a2d; border: 1px solid #4caf50; }
        .error { background: #5a2d2d; border: 1px solid #f44336; }
        .loading { background: #2d2d5a; border: 1px solid #2196f3; }
        .btn { padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .btn:hover { background: #0052a3; }
        #results { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>🏈 Sunday Edge Pro - API Connection Test</h1>
    <p>Testing connection to your Railway API: <strong>https://sunday-edge-pro-api-production.up.railway.app</strong></p>
    
    <button class="btn" onclick="runTests()">🧪 Run API Tests</button>
    <button class="btn" onclick="clearResults()">🗑️ Clear Results</button>
    
    <div id="results"></div>

    <script src="js/api-client.js"></script>
    <script>
        async function runTests() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="test-result loading">🔄 Running API tests...</div>';
            
            const tests = [
                { name: 'API Status Check', test: () => window.sundayEdgeAPI.getStatus() },
                { name: 'NFL Odds Data', test: () => window.sundayEdgeAPI.getNFLOdds() },
                { name: 'ESPN Live Scores', test: () => window.sundayEdgeAPI.getLiveScores() },
                { name: 'Today\'s Games', test: () => window.sundayEdgeAPI.getTodaysGames() },
                { name: 'Best Bets Analysis', test: () => window.sundayEdgeAPI.getBestBets() }
            ];
            
            results.innerHTML = '';
            
            for (const testCase of tests) {
                const testDiv = document.createElement('div');
                testDiv.className = 'test-result loading';
                testDiv.innerHTML = `🔄 Testing: ${testCase.name}...`;
                results.appendChild(testDiv);
                
                try {
                    const startTime = Date.now();
                    const result = await testCase.test();
                    const endTime = Date.now();
                    const duration = endTime - startTime;
                    
                    if (result && (result.success !== false)) {
                        testDiv.className = 'test-result success';
                        testDiv.innerHTML = `✅ ${testCase.name} - SUCCESS (${duration}ms)`;
                        
                        // Add some details
                        if (result.games) {
                            testDiv.innerHTML += `<br>&nbsp;&nbsp;&nbsp;📊 Found ${result.games.length} games`;
                        }
                        if (result.recommendations) {
                            testDiv.innerHTML += `<br>&nbsp;&nbsp;&nbsp;🎯 Generated ${result.recommendations.length} predictions`;
                        }
                        if (result.status) {
                            testDiv.innerHTML += `<br>&nbsp;&nbsp;&nbsp;🟢 Status: ${result.status}`;
                        }
                    } else {
                        testDiv.className = 'test-result error';
                        testDiv.innerHTML = `❌ ${testCase.name} - FAILED`;
                        if (result.error) {
                            testDiv.innerHTML += `<br>&nbsp;&nbsp;&nbsp;Error: ${result.error}`;
                        }
                    }
                } catch (error) {
                    testDiv.className = 'test-result error';
                    testDiv.innerHTML = `❌ ${testCase.name} - ERROR<br>&nbsp;&nbsp;&nbsp;${error.message}`;
                }
                
                // Small delay between tests
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            // Final summary
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-result success';
            summaryDiv.innerHTML = `
                <h3>🎉 Test Summary</h3>
                <p>Your Sunday Edge Pro API connection is working!</p>
                <p><strong>Next Step:</strong> Upload your updated 'public' folder to sundayedgepro.com</p>
                <p><strong>Expected Result:</strong> Live NFL data will load automatically</p>
            `;
            results.appendChild(summaryDiv);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        // Auto-run tests on page load
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html>