<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Test - Football Analytics</title>
    <style>
        body {
            background: #0a0a0a;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .test-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        .result {
            margin: 15px 0;
            padding: 15px;
            background: #333;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .success { border-left-color: #28a745; color: #28a745; }
        .error { border-left-color: #dc3545; color: #dc3545; }
        .warning { border-left-color: #ffc107; color: #ffc107; }
        .console-output {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-loading { background: #ffc107; animation: pulse 1s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <h1>üîß Football Analytics - Button Functionality Test</h1>
    
    <div class="test-section">
        <h2>üîç System Status</h2>
        <div id="system-status" class="result">
            <div><span class="status-indicator status-loading"></span>Checking system status...</div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üîî Notification System</h2>
        <button class="test-btn" onclick="testNotificationButton()">Test Notification Toggle</button>
        <button class="test-btn" onclick="window.footballApp && window.footballApp.toggleNotificationPanel()">Direct Notification Call</button>
        <div id="notification-result" class="result">Click a button to test notifications...</div>
    </div>
    
    <div class="test-section">
        <h2>üîÑ Data Refresh</h2>
        <button class="test-btn" onclick="testRefreshButton()">Test Refresh Data</button>
        <button class="test-btn" onclick="window.footballApp && window.footballApp.refreshData()">Direct Refresh Call</button>
        <div id="refresh-result" class="result">Click a button to test data refresh...</div>
    </div>
    
    <div class="test-section">
        <h2>üé≤ Monte Carlo Simulation</h2>
        <button class="test-btn" onclick="testMonteCarloButton()">Test Monte Carlo</button>
        <button class="test-btn" onclick="window.footballApp && window.footballApp.runMonteCarloSimulation()">Direct Monte Carlo Call</button>
        <div id="montecarlo-result" class="result">Click a button to test Monte Carlo simulation...</div>
    </div>
    
    <div class="test-section">
        <h2>üß† ML Model Training</h2>
        <button class="test-btn" onclick="testRetrainButton()">Test Model Retrain</button>
        <button class="test-btn" onclick="window.footballApp && window.footballApp.retrainModels()">Direct Retrain Call</button>
        <div id="retrain-result" class="result">Click a button to test model retraining...</div>
    </div>
    
    <div class="test-section">
        <h2>üîî Alert Creation</h2>
        <button class="test-btn" onclick="testCreateAlertButton()">Test Create Alert</button>
        <button class="test-btn" onclick="window.footballApp && window.footballApp.createAlert()">Direct Alert Call</button>
        <div id="alert-result" class="result">Click a button to test alert creation...</div>
    </div>
    
    <div class="test-section">
        <h2>üß≠ Navigation</h2>
        <button class="test-btn" onclick="testNavigation('teams')">Go to Teams</button>
        <button class="test-btn" onclick="testNavigation('players')">Go to Players</button>
        <button class="test-btn" onclick="testNavigation('dashboard')">Go to Dashboard</button>
        <div id="navigation-result" class="result">Click a button to test navigation...</div>
    </div>
    
    <div class="test-section">
        <h2>üì± UI Controls</h2>
        <button class="test-btn" onclick="testSidebarToggle()">Toggle Sidebar</button>
        <button class="test-btn" onclick="testUserMenu()">Toggle User Menu</button>
        <div id="ui-result" class="result">Click a button to test UI controls...</div>
    </div>
    
    <div class="test-section">
        <h2>üìä Console Output</h2>
        <div id="console-output" class="console-output">Console messages will appear here...</div>
        <button class="test-btn" onclick="clearConsole()">Clear Console</button>
    </div>
    
    <script>
        // Test functions
        function testNotificationButton() {
            updateResult('notification-result', 'Testing notification toggle...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.toggleNotificationPanel === 'function') {
                    window.footballApp.toggleNotificationPanel();
                    updateResult('notification-result', '‚úÖ Notification toggle successful!', 'success');
                } else {
                    updateResult('notification-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('notification-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testRefreshButton() {
            updateResult('refresh-result', 'Testing data refresh...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.refreshData === 'function') {
                    window.footballApp.refreshData();
                    updateResult('refresh-result', '‚úÖ Data refresh successful!', 'success');
                } else {
                    updateResult('refresh-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('refresh-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testMonteCarloButton() {
            updateResult('montecarlo-result', 'Testing Monte Carlo simulation...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.runMonteCarloSimulation === 'function') {
                    window.footballApp.runMonteCarloSimulation();
                    updateResult('montecarlo-result', '‚úÖ Monte Carlo simulation started!', 'success');
                } else {
                    updateResult('montecarlo-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('montecarlo-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testRetrainButton() {
            updateResult('retrain-result', 'Testing model retraining...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.retrainModels === 'function') {
                    window.footballApp.retrainModels();
                    updateResult('retrain-result', '‚úÖ Model retraining started!', 'success');
                } else {
                    updateResult('retrain-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('retrain-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testCreateAlertButton() {
            updateResult('alert-result', 'Testing alert creation...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.createAlert === 'function') {
                    window.footballApp.createAlert();
                    updateResult('alert-result', '‚úÖ Alert creation dialog opened!', 'success');
                } else {
                    updateResult('alert-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('alert-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testNavigation(view) {
            updateResult('navigation-result', `Testing navigation to ${view}...`, 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.switchView === 'function') {
                    window.footballApp.switchView(view);
                    updateResult('navigation-result', `‚úÖ Navigation to ${view} successful!`, 'success');
                } else {
                    updateResult('navigation-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('navigation-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testSidebarToggle() {
            updateResult('ui-result', 'Testing sidebar toggle...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.toggleSidebar === 'function') {
                    window.footballApp.toggleSidebar();
                    updateResult('ui-result', '‚úÖ Sidebar toggle successful!', 'success');
                } else {
                    updateResult('ui-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('ui-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function testUserMenu() {
            updateResult('ui-result', 'Testing user menu toggle...', 'warning');
            try {
                if (window.footballApp && typeof window.footballApp.toggleUserMenu === 'function') {
                    window.footballApp.toggleUserMenu();
                    updateResult('ui-result', '‚úÖ User menu toggle successful!', 'success');
                } else {
                    updateResult('ui-result', '‚ùå Football app or method not found', 'error');
                }
            } catch (error) {
                updateResult('ui-result', `‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function updateResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.className = `result ${type}`;
            }
        }
        
        function clearConsole() {
            document.getElementById('console-output').innerHTML = 'Console cleared...';
        }
        
        // System status check
        function checkSystemStatus() {
            const statusElement = document.getElementById('system-status');
            const checks = [];
            
            // Check if app exists
            checks.push({
                name: 'Football App',
                status: !!window.footballApp,
                details: window.footballApp ? 'Loaded' : 'Not found'
            });
            
            // Check methods
            if (window.footballApp) {
                const methods = ['refreshData', 'toggleNotificationPanel', 'runMonteCarloSimulation', 'retrainModels', 'createAlert'];
                methods.forEach(method => {
                    checks.push({
                        name: method,
                        status: typeof window.footballApp[method] === 'function',
                        details: typeof window.footballApp[method]
                    });
                });
            }
            
            // Check server
            fetch('/health')
                .then(response => response.json())
                .then(data => {
                    checks.push({
                        name: 'Server',
                        status: data.status === 'healthy',
                        details: data.status
                    });
                    updateSystemStatus(checks);
                })
                .catch(error => {
                    checks.push({
                        name: 'Server',
                        status: false,
                        details: 'Connection failed'
                    });
                    updateSystemStatus(checks);
                });
        }
        
        function updateSystemStatus(checks) {
            const statusElement = document.getElementById('system-status');
            let html = '';
            
            checks.forEach(check => {
                const indicator = check.status ? 'status-online' : 'status-offline';
                html += `<div><span class="status-indicator ${indicator}"></span>${check.name}: ${check.details}</div>`;
            });
            
            statusElement.innerHTML = html;
        }
        
        // Console capture
        const originalLog = console.log;
        const originalError = console.error;
        const consoleOutput = document.getElementById('console-output');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addConsoleMessage(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addConsoleMessage(args.join(' '), 'error');
        };
        
        function addConsoleMessage(message, type) {
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#dc3545' : '#28a745';
            consoleOutput.innerHTML += `<div style="color: ${color}; margin: 2px 0;">[${timestamp}] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // Initialize
        setTimeout(() => {
            checkSystemStatus();
        }, 1000);
    </script>
    
    <!-- Load the main app -->
    <script src="app.js"></script>
    <script src="button-fix.js"></script>
</body>
</html>